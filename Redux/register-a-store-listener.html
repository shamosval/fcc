<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        Register a Store Listener
    </title>
    <script src="https://unpkg.com/redux@4.2.1/dist/redux.min.js"></script>

</head>
<body>

<script>
    const { createStore } = window.Redux;

    const ADD = 'ADD';

    const reducer = (state = 0, action) => {
        switch(action.type) {
            case ADD:
                return state + 1;
            default:
                return state;
        }
    };

    const store = Redux.createStore(reducer);

    // Global count variable:
    let count = 0;

    // Change code below this line
    const addOne = () => {
        count++;

    };

    store.subscribe(addOne);

    // Change code above this line

    store.dispatch({type: ADD});
    console.log(count);
    store.dispatch({type: ADD});
    console.log(count);
    store.dispatch({type: ADD});
    console.log(count);


</script>


</body>
</html>

<!--
Register a Store Listener
Another method you have access to on the Redux store object is store.subscribe(). This allows you to subscribe listener functions to the store, which are called whenever an action is dispatched against the store. One simple use for this method is to subscribe a function to your store that simply logs a message every time an action is received and the store is updated.

Write a callback function that increments the global variable count every time the store receives an action, and pass this function in to the store.subscribe() method. You'll see that store.dispatch() is called three times in a row, each time directly passing in an action object. Watch the console output between the action dispatches to see the updates take place.

Run the Tests (Ctrl + Enter)
Reset this lesson
Get Help
Tests
Passed:1. Dispatching the ADD action on the store should increment the state by 1.
Passed:2. There should be a listener function subscribed to the store using store.subscribe.
Passed:3. The store.subscribe should receive a function.
Passed:4. The function passed to store.subscribe should not be called.
Passed:5. The callback to store.subscribe should also increment the global count variable as the store is updated.

-->